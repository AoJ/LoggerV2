<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<title></title>

	<script src="/javascripts/underscore.js"></script>
	<script src="/javascripts/now.js"></script>
	<script src="/javascripts/data.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.js"></script>
	<script>
		var name = '{{{{name}}}}';
	</script>

</head>
<body>
<div id="test"></div>
<script>
	var now = nowInitialize();
	now.name = name;
	now.receiveLog = function (msg, data) { console.log(data, msg); }

	var data = new Data.Collection( {
		"properties": {
			"a": {"name": "Country Name", "type": "string", "unique": false },
			"b": {"name": "Official Language", "type": "string", "unique": false },
			"c": { "name": "Population", "type": "string", "unique": false }
		}
	});

	now.newData = function (message) {
		data.set(undefined, message);
		$('#test').appendChild($('<div />').value(data.items().length));
	}

</script>
</body>
</html>